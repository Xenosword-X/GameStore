import{_ as f,r as u,z as m,C as w,c as o,o as r,a as s,w as x,g as i,F as h,k as g,t as l,j as k,h as y,s as p}from"./index-Drcz_wGL.js";const $={class:"my-5 row justify-content-center"},C={class:"row justify-content-center"},j={class:"col-md-6"},B={class:"card shadow-sm mb-4"},I={class:"card-body p-0"},N={class:"table table-hover align-middle mb-0"},V={class:"text-center"},E={class:"text-end"},F={class:"table-light"},L={class:"text-end fw-bold text-danger"},M={class:"row justify-content-center"},O={class:"col-md-6"},S={class:"card shadow-sm mb-4"},T={class:"card-body"},U={class:"table mb-0"},q={key:0,class:"badge bg-warning text-dark"},z={key:1,class:"badge bg-success"},D={class:"text-end"},R={__name:"UserCheckout",setup(A){const e=u({user:{},products:[]}),c=u(""),n=u(!1),_=w(),b=async()=>{const a=`https://vue3-course-api.hexschool.io/v2/api/xenosword-api/order/${c.value}`;n.value=!0;try{const t=await y.get(a);t.data.success&&(e.value=t.data.order)}catch{p("error","資料載入失敗")}finally{n.value=!1}},v=async()=>{const a=`https://vue3-course-api.hexschool.io/v2/api/xenosword-api/pay/${c.value}`;n.value=!0;try{(await y.post(a)).data.success&&(p("success","已成功付款"),await b())}catch{p("error","資料載入失敗")}finally{n.value=!1}};return m(()=>{c.value=_.params.orderId,b()}),(a,t)=>(r(),o(h,null,[s("div",$,[s("form",{class:"col-md-6",onSubmit:x(v,["prevent"])},[...t[0]||(t[0]=[s("div",{class:"text-center mb-2"},[s("h3",{class:"fw-bold text-primary"},[s("i",{class:"bi bi-receipt"}),i(" 訂單明細確認")]),s("p",{class:"text-muted"},"請再次確認以下資訊後完成付款")],-1)])],32)]),s("div",C,[s("div",j,[s("div",B,[t[3]||(t[3]=s("div",{class:"card-header bg-primary text-white fw-bold"},[s("i",{class:"bi bi-cart4"}),i(" 購買商品清單 ")],-1)),s("div",I,[s("table",N,[t[2]||(t[2]=s("thead",{class:"table-light"},[s("tr",null,[s("th",null,"品名"),s("th",{class:"text-center"},"數量"),s("th",{class:"text-end"},"單價")])],-1)),s("tbody",null,[(r(!0),o(h,null,g(e.value.products,d=>(r(),o("tr",{key:d.id},[s("td",null,l(d.product.title),1),s("td",V,l(d.qty)+"/"+l(d.product.unit),1),s("td",E,l(a.$filters.currency(d.final_total)),1)]))),128))]),s("tfoot",F,[s("tr",null,[t[1]||(t[1]=s("td",{colspan:"2",class:"text-end fw-bold"},"總計",-1)),s("td",L,l(a.$filters.currency(e.value.total)),1)])])])])])])]),s("div",M,[s("div",O,[s("div",S,[t[9]||(t[9]=s("div",{class:"card-header bg-primary text-white fw-bold"},[s("i",{class:"bi bi-person-lines-fill"}),i(" 收件人資訊 ")],-1)),s("div",T,[s("table",U,[s("tbody",null,[s("tr",null,[t[4]||(t[4]=s("th",{width:"120"},"Email",-1)),s("td",null,l(e.value.user.email),1)]),s("tr",null,[t[5]||(t[5]=s("th",null,"姓名",-1)),s("td",null,l(e.value.user.name),1)]),s("tr",null,[t[6]||(t[6]=s("th",null,"電話",-1)),s("td",null,l(e.value.user.tel),1)]),s("tr",null,[t[7]||(t[7]=s("th",null,"地址",-1)),s("td",null,l(e.value.user.address),1)]),s("tr",null,[t[8]||(t[8]=s("th",null,"付款狀態",-1)),s("td",null,[e.value.is_paid?(r(),o("span",z,"付款完成")):(r(),o("span",q,"尚未付款"))])])])])])]),s("div",D,[e.value.is_paid?k("",!0):(r(),o("button",{key:0,class:"btn btn-success px-4 py-2",onClick:v},[...t[10]||(t[10]=[s("i",{class:"bi bi-credit-card"},null,-1),i(" 確認付款 ",-1)])]))])])])],64))}},H=f(R,[["__scopeId","data-v-866eac15"]]);export{H as default};
